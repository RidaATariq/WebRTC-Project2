<!DOCTYPE html>
<html lang="en">
<head>
  <title>Project 2</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no" />
  <link rel="stylesheet" href="stylesheets/screen.css" />
</head>
<body>
  <header id="header">
    <h1>Project 2</h1>

  </header>
  <article id="videos">

    <video id="peer"
      autoplay
      playsinline>
    </video>


    <video id="self"
      autoplay
      muted
      playsinline>
    </video>

    <button type="button" class="join" id="call-button">Join Call</button>
    <button type="button" class="videocut" id="video-button">Video Off</button>
    <button type="button" class="audiocut" id="audio-button">Mute</button>

  </article>
  <article id="chatbox">
      <h2 class"chat-access"> Chat Area </h2>
      <ol id= "chat-log"></ol>
      <form id="chat-form" action="#null">
        <label for="chat-msg" class="chat-access">Compose Message</label>
        <input type="text" id="chat-msg" name="chat-msg" autocomplete="off" />
        <button type="submit" class="send" id="chat-btn">Send</button>

      </form>
  </article>
  <article id="music">
      <h2 class"music-access"> Music Access</h2>
      <ol id= "music-log"></ol>
      <script src="https://sdk.scdn.co/spotify-player.js"></script>
      <button id="togglePlay">Toggle Play</button>
      <script>
      //Initialization of Web Playback SDK for Spotify
      window.onSpotifyWebPlaybackSDKReady = () => {
        const token = 'xxxxxxx'; //We have to add a token of a premium spotify account
        const player = new Spotify.Player({
          name: 'Web Playback SDK Quick Start Player',
          getOAuthToken: cb => { cb(token); },
          volume: 0.5
        });

        // Ready
          player.addListener('ready', ({ device_id }) => {
            console.log('Ready with Device ID', device_id);
          });

          // Not Ready
          player.addListener('not_ready', ({ device_id }) => {
            console.log('Device ID has gone offline', device_id);
          });
          player.addListener('initialization_error', ({ message }) => {
           console.error(message);
         });

         player.addListener('authentication_error', ({ message }) => {
             console.error(message);
         });

         player.addListener('account_error', ({ message }) => {
             console.error(message);
         });

         //Connect to Spotify
         player.connect();
         document.getElementById('togglePlay').onclick = function() {
        player.togglePlay();
        };
      </script>
  </article>

<script src="/socket.io/socket.io.js"></script>
<script src="https://webrtchacks.github.io/adapter/adapter-latest.js"></script>
<script src="javascripts/main.js"></script>
</body>
</html>
